<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro ㋡</title>

  <!-- Bootswatch Minty (tema Bootstrap) -->
  <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.0/dist/minty/bootstrap.min.css" rel="stylesheet" />

  <!-- Choices.js CSS para selects mejorados -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />

  <!-- Estilos personalizados (opcional) -->
  <style>
    /* Barra superior (bienvenida + logout) */
    #welcomeBar {
      display: none;
    }

    /* Ocultar app (formulario) hasta que haya login */
    #appView {
      display: none;
    }

    /* Limitar ancho de los contenedores para mejor lectura */
    .container-narrow {
      max-width: 1200px;
      margin: 0 auto;
    }
  </style>
</head>

<body>

  <!-- =========================
       VISTA LOGIN
       ========================= -->
  <div id="loginView" class="container container-narrow py-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow">
          <div class="card-header bg-primary text-white fw-bold">Iniciar sesión</div>
          <div class="card-body">
            <form id="loginForm" novalidate>
              <div class="mb-3">
                <label for="usuario" class="form-label">Usuario</label>
                <input type="text" class="form-control" id="usuario" required />
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Contraseña</label>
                <input type="password" class="form-control" id="password" required />
              </div>
              <button id="btnLogin" type="submit" class="btn btn-primary w-100">Entrar</button>
              <div id="loginError" class="text-danger mt-3"></div>
            </form>
          </div>
        </div>
        <p class="text-muted mt-3 small">
          * Debe iniciar sesión para usar el formulario.
        </p>
      </div>
    </div>
  </div>

  <!-- =========================
       VISTA APP (Bienvenida + Formulario)
       ========================= -->
  <div id="appView">
    <!-- Barra superior de bienvenida + Logout -->
    <div id="welcomeBar" class="bg-light border-bottom">
      <div class="container container-narrow py-2 d-flex justify-content-end align-items-center gap-2">
        <span id="welcomeText" class="me-2"></span>
        <button id="btnLogout" class="btn btn-sm btn-outline-danger">Cerrar sesión</button>
      </div>
    </div>

    <!-- Contenido principal -->
    <div class="container container-narrow py-5">
      <h1 class="mb-4 text-center fw-bold">REGISTRO CENTRO QUIRURGICO</h1>

      <form id="quirForm" class="needs-validation" novalidate>
        <!-- Campo oculto para enviar el usuario logeado si quieres guardarlo en el Form -->
        <!-- Si lo usas, reemplaza entry.XXXXXXXXXX en app.js por tu ID real del Google Form -->
        <input type="hidden" id="usuario_registro" name="usuario_registro" value="" />

        <!-- CARD: Datos Paciente -->
        <div class="card mb-4">
          <div class="card-header bg-primary text-white fw-bold">Datos Paciente</div>
          <div class="card-body">
            <div class="row g-3">

              <div class="col-md-2">
                <label for="estado" class="form-label">Estado</label>
                <select class="form-select" id="estado" name="estado" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">REALIZADOS</option>
                  <option value="2">SUSPENDIDO</option>
                  <option value="3">FALLECIDO</option>
                  <option value="CORRECCION">CORRECCION</option>
                </select>
                <div class="invalid-feedback">Por favor seleccione un estado válido.</div>
              </div>

              <div class="col-md-2">
                <label for="fecha" class="form-label">Fecha</label>
                <input type="date" class="form-control" id="fecha" name="fecha" required min="" max="" />
                <div class="invalid-feedback">Seleccione una fecha válida (mes actual o siguiente).</div>
              </div>

              <div class="col-md-2">
                <label for="tipo" class="form-label">Tipo</label>
                <select class="form-select" id="tipo" name="tipo" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">EMERGENCIA</option>
                  <option value="2">PROGRAMADA</option>
                </select>
                <div class="invalid-feedback">Por favor seleccione un estado válido.</div>
              </div>

              <div class="col-md-4">
                <label for="nombres" class="form-label">Nombres y Apellidos</label>
                <input type="text" class="form-control" id="nombres" name="nombres" required minlength="3" />
                <div class="invalid-feedback">Por favor ingrese nombres y apellidos.</div>
              </div>

              <div class="col-md-2">
                <label for="sexo" class="form-label">Sexo</label>
                <select class="form-select" id="sexo" name="sexo" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">Masculino</option>
                  <option value="2">Femenino</option>
                </select>
                <div class="invalid-feedback">Seleccione un sexo.</div>
              </div>

              <div class="col-md-1">
                <label for="edad" class="form-label">Edad</label>
                <input type="number" min="0" max="130" class="form-control" id="edad" name="edad" required />
                <div class="invalid-feedback">Ingrese una edad válida.</div>
              </div>

              <div class="col-md-2">
                <label for="hcl" class="form-label">Historia Clínica (HCL)</label>
                <input type="text" class="form-control" id="hcl" name="hcl" pattern="\d+" required />
                <div class="invalid-feedback">Ingrese un número de HCL válido.</div>
              </div>

              <div class="col-md-2">
                <label for="especialidad" class="form-label">ESPECIALIDAD</label>
                <select class="form-select" id="especialidad" name="especialidad" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">CIRUGÍA GENERAL</option>
                  <option value="2">CIRUGÍA PEDIÁTRICA</option>
                  <option value="3">CIRUGÍA PLÁSTICA</option>
                  <option value="4">CIRUGÍA VASCULAR</option>
                  <option value="5">GINECOLOGÍA</option>
                  <option value="6">OFTALMOLOGÍA</option>
                  <option value="7">ORL</option>
                  <option value="8">UROLOGÍA</option>
                  <option value="9">TRAUMATOLOGÍA</option>
                </select>
                <div class="invalid-feedback">Seleccione una especialidad válida.</div>
              </div>

              <div class="col-md-3">
                <label for="procedencia" class="form-label">Procedencia</label>
                <select class="form-select" id="procedencia" name="procedencia" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">EMERGENCIA ADULTO</option>
                  <option value="2">EMERGENCIA PEDIÁTRICA</option>
                  <option value="3">HOSPITALIZACIÓN PEDIÁTRICA</option>
                  <option value="4">HOSPITALIZACIÓN QUIRÚRGICA</option>
                  <option value="5">HOSPITALIZACIÓN CLÍNICA</option>
                  <option value="6">HOSPITALIZACIÓN OBSTÉTRICA</option>
                  <option value="7">UCI INTERMEDIOS</option>
                  <option value="8">UCI</option>
                  <option value="9">MEDICINA TRANSFUNCIONAL</option>
                  <option value="10">UCI NEO</option>
                  <option value="11">HOSPITAL DEL DÍA</option>
                  <option value="12">ENDOSCOPIA</option>
                </select>
                <div class="invalid-feedback">Seleccione una procedencia válida.</div>
              </div>

              <div class="col-md-2">
                <label for="cedula" class="form-label">Cédula</label>
                <input type="text" class="form-control" id="cedula" name="cedula" pattern="\d{10}" required />
                <div class="invalid-feedback">Ingrese una cédula válida de 10 dígitos.</div>
              </div>

              <div class="col-md-2">
                <label for="qx" class="form-label">QX</label>
                <select class="form-select" id="qx" name="qx" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                </select>
                <div class="invalid-feedback">Seleccione un QX válido.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- CARD: Datos Cirujano -->
        <div class="card mb-4">
          <div class="card-header bg-secondary text-white fw-bold">Datos Cirujano</div>
          <div class="card-body">
            <div class="row g-3">

              <div class="col-md-4">
                <label for="medico_cirujano" class="form-label">Médico Cirujano</label>
                <select class="form-select" id="medico_cirujano" name="medico_cirujano" required>
                  <option value="" selected disabled>Seleccione cirujano</option>
                </select>
                <div class="invalid-feedback">Seleccione un médico cirujano.</div>
              </div>

              <div class="col-md-4">
                <label for="enfermero" class="form-label">Enfermero</label>
                <select class="form-select" id="enfermero" name="enfermero" required>
                  <option value="" selected disabled>Seleccione enfermero</option>
                </select>
                <div class="invalid-feedback">Seleccione un enfermero.</div>
              </div>

              <div class="col-md-4">
                <label for="anestesiologo" class="form-label">Anestesiólogo</label>
                <select class="form-select" id="anestesiologo" name="anestesiologo" required>
                  <option value="" selected disabled>Seleccione anestesiólogo</option>
                </select>
                <div class="invalid-feedback">Seleccione un anestesiólogo.</div>
              </div>

              <div class="col-12">
                <label for="diagnostico" class="form-label">Diagnóstico</label>
                <!-- size=7 -> NO le aplicaremos Choices.js para que conserve el alto -->
                <select class="form-select" id="diagnostico" name="diagnostico" required>
                  <option value="" disabled selected>Seleccione diagnóstico</option>
                </select>
                <div class="invalid-feedback">Seleccione un diagnóstico.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- CARD: Tiempos de Cirugía -->
        <div class="card mb-4">
          <div class="card-header bg-success text-white fw-bold">Tiempos de Cirugía</div>
          <div class="card-body">
            <div class="row g-3">

              <div class="col-md-2">
                <label for="hora_llamada_hospitalizado" class="form-label">Hora de llamada del paciente
                  hospitalizado<span class="text-danger">*</span></label>
                <input type="time" class="form-control" id="hora_llamada_hospitalizado"
                  name="hora_llamada_hospitalizado">
              </div>

              <div class="col-md-2">
                <label for="hora_llamada_emergencia" class="form-label">Hora de llamada del paciente de
                  emergencia</label>
                <input type="time" class="form-control" id="hora_llamada_emergencia" name="hora_llamada_emergencia">
              </div>

              <div class="col-md-2">
                <label for="hora_cirugia_programada" class="form-label">Hora de la cirugía programada (solo si es
                  programada)</label>
                <input type="time" class="form-control" id="hora_cirugia_programada" name="hora_cirugia_programada">
              </div>

              <div class="col-md-2">
                <label for="hora_llegada_cqx" class="form-label">Hora de llegada del paciente a CQX</label>
                <input type="time" class="form-control" id="hora_llegada_cqx" name="hora_llegada_cqx" required>
              </div>

              <div class="col-md-2">
                <label for="hora_entrada_quirofano" class="form-label">Hora de entrada del paciente a quirófano</label>
                <input type="time" class="form-control" id="hora_entrada_quirofano" name="hora_entrada_quirofano"
                  required>
              </div>

              <div class="col-md-2">
                <label for="hora_llegada_anestesiologo" class="form-label">Hora de llegada del anestesiólogo</label>
                <input type="time" class="form-control" id="hora_llegada_anestesiologo"
                  name="hora_llegada_anestesiologo" required>
              </div>

              <div class="col-md-2">
                <label for="hora_inicio_anestesia" class="form-label">Hora inicio anestesia</label>
                <input type="time" class="form-control" id="hora_inicio_anestesia" name="hora_inicio_anestesia"
                  required>
              </div>

              <div class="col-md-2">
                <label for="hora_fin_anestesia" class="form-label">Hora finalización anestesia</label>
                <input type="time" class="form-control" id="hora_fin_anestesia" name="hora_fin_anestesia" required>
              </div>

              <div class="col-md-2">
                <label for="hora_salida_anestesiologo" class="form-label">Hora salida de quirófano del
                  anestesiólogo</label>
                <input type="time" class="form-control" id="hora_salida_anestesiologo" name="hora_salida_anestesiologo"
                  required>
              </div>

              <div class="col-md-2">
                <label for="hora_llegada_cirujano" class="form-label">Hora llegada a quirófano del cirujano</label>
                <input type="time" class="form-control" id="hora_llegada_cirujano" name="hora_llegada_cirujano"
                  required>
              </div>

              <div class="col-md-2">
                <label for="hora_inicio_cirujano" class="form-label">Hora inicio cirujano</label>
                <input type="time" class="form-control" id="hora_inicio_cirujano" name="hora_inicio_cirujano" required>
              </div>

              <div class="col-md-2">
                <label for="hora_fin_cirujano" class="form-label">Hora finalización cirujano</label>
                <input type="time" class="form-control" id="hora_fin_cirujano" name="hora_fin_cirujano" required>
              </div>

              <div class="col-md-2">
                <label for="hora_salida_cirujano" class="form-label">Hora salida del cirujano</label>
                <input type="time" class="form-control" id="hora_salida_cirujano" name="hora_salida_cirujano" required>
              </div>

              <div class="col-md-2">
                <label for="hora_inicio_desinfeccion" class="form-label">Inicio desinfección enfermería</label>
                <input type="time" class="form-control" id="hora_inicio_desinfeccion" name="hora_inicio_desinfeccion"
                  required>
              </div>

              <div class="col-md-2">
                <label for="hora_fin_desinfeccion" class="form-label">Final desinfección enfermería</label>
                <input type="time" class="form-control" id="hora_fin_desinfeccion" name="hora_fin_desinfeccion"
                  required>
              </div>

              <div class="col-md-2">
                <label for="hora_inicio_limpieza" class="form-label">Inicio limpieza externa</label>
                <input type="time" class="form-control" id="hora_inicio_limpieza" name="hora_inicio_limpieza" required>
              </div>

              <div class="col-md-2">
                <label for="hora_fin_limpieza" class="form-label">Final limpieza externa</label>
                <input type="time" class="form-control" id="hora_fin_limpieza" name="hora_fin_limpieza" required>
              </div>
            </div>
          </div>
        </div>

        <!-- CARD: Observaciones de CIrugia -->
        <div class="card mb-4">
          <div class="card-header bg-secondary text-white fw-bold">Observaciones de Cirugía</div>
          <div class="card-body">
            <div class="row g-3">

              <div class="col-12">
                <label for="observaciones" class="form-label">Observaciones</label>
                <textarea class="form-control" id="observaciones" name="observaciones" rows="3" placeholder="Escriba aquí observaciones adicionales"></textarea>
              </div>
              
              <div class="col-12">
                <label for="procedimientoRealizado" class="form-label">Procedimiento Realizado</label>
                <input type="text" class="form-control" id="procedimientoRealizado" name="procedimientoRealizado">
              </div>
              
              <div class="col-3">
                <label for="priayudantecir" class="form-label">Primer Ayudante Cirujano</label>
                <input type="text" class="form-control" id="priayudantecir" name="priayudantecir">
              </div>

              <div class="col-3">
                <label for="segayudantecir" class="form-label">Segundo Ayudante Cirujano</label>
                <input type="text" class="form-control" id="segayudantecir" name="segayudantecir">
              </div>              
              
              <div class="col-3">
                <label for="ayudanteAnestesiologo" class="form-label">Ayudante Anestesiólogo</label>
                <input type="text" class="form-control" id="ayudanteAnestesiologo" name="ayudanteAnestesiologo">
              </div>

              <div class="col-3">
                <label for="priayudanteenf" class="form-label">Ayudante Enfermeria</label>
                <input type="text" class="form-control" id="priayudanteenf" name="priayudanteenf">
              </div>

              <div class="col-md-2">
                <label for="tipoAnestesia" class="form-label">Tipo de Anestesia</label>
                <select class="form-select" id="tipoAnestesia" name="tipoAnestesia" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">LOCAL SEDACION</option>
                  <option value="2">BLOQUEO + SEDACION</option>
                  <option value="3">RAQUIDEA</option>
                  <option value="4">GENERAL</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>
              
              <div class="col-md-3">
                <label for="instrumentista" class="form-label">Instrumentista</label>
                <input type="text" class="form-control" id="instrumentista" name="instrumentista">
              </div>
              
              <div class="col-md-3">
                <label for="circulante" class="form-label">Circulante</label>
                <input type="text" class="form-control" id="circulante" name="circulante">
              </div>
              
              <div class="col-md-3">
                <label for="instrumentistaRecibe" class="form-label">Instrumentista que recibe</label>
                <input type="text" class="form-control" id="instrumentistaRecibe" name="instrumentistaRecibe">
              </div>
              
              <div class="col-md-3">
                <label for="circulanteRecibe" class="form-label">Circulante que recibe</label>
                <input type="text" class="form-control" id="circulanteRecibe" name="circulanteRecibe">
              </div>

              <div class="col-md-2">
                <label for="canalizaPaciente" class="form-label">Canaliza o recanaliza paciente</label>
                <select class="form-select" id="canalizaPaciente" name="canalizaPaciente" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">SI</option>
                  <option value="2">NO</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>

              <div class="col-md-2">
                <label for="recuperacion" class="form-label">Recuperación / UCI / Hospital del día</label>
                <select class="form-select" id="recuperacion" name="recuperacion" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">RECUPERACION</option>
                  <option value="2">HOSPITAL DEL DIA</option>
                  <option value="3">UCI PEDIATRICA</option>
                  <option value="4">UCI SALA A</option>
                  <option value="5">UCI SALA B</option>
                  <option value="6">UCI SALA C</option>
                  <option value="7">CUIDADOS INTERMEDIOS</option>
                  <option value="8">UCI NEO</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>

              <div class="col-md-2">
                <label for="listaVerificacion" class="form-label">Se realiza lista de verificación de cirugía segura</label>
                <select class="form-select" id="listaVerificacion" name="listaVerificacion" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">SI</option>
                  <option value="2">NO</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>

              <div class="col-md-2">
                <label for="profilaxis" class="form-label">Profilaxis</label>
                <select class="form-select" id="profilaxis" name="profilaxis" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">SI</option>
                  <option value="2">NO</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>

              <div class="col-md-2">
                <label for="marcacionQuirurgica" class="form-label">Marcación quirúrgica</label>
                <select class="form-select" id="marcacionQuirurgica" name="marcacionQuirurgica" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">SI</option>
                  <option value="2">NO</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>

              <div class="col-md-2">
                <label for="pacienteBrazalete" class="form-label">Brazalete</label>
                <select class="form-select" id="pacienteBrazalete" name="pacienteBrazalete" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">SI</option>
                  <option value="2">NO</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>
              
              <div class="col-md-2">
                <label for="pacienteIdentificado" class="form-label">Paciente identificado</label>
                <select class="form-select" id="pacienteIdentificado" name="pacienteIdentificado" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">SI</option>
                  <option value="2">NO</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>

              <div class="col-md-2">
                <label for="suspendidoPor" class="form-label">Suspendido por</label>
                <select class="form-select" id="suspendidoPor" name="suspendidoPor" required>
                  <option value="" selected disabled>Seleccione...</option>
                  <option value="1">CAUSA MEDICA</option>
                  <option value="2">CAUSA NO MEDICA</option>
                </select>
                <div class="invalid-feedback">Seleccione</div>
              </div>
              
              <div class="col-md-2">
                <label for="horaEntrega" class="form-label">Hora de entrega de paciente a recuperación</label>
                <input type="time" class="form-control" id="horaEntrega" name="horaEntrega">
              </div>

              <div class="col-md-2">
                <label for="horaTraenParte" class="form-label">Hora Que traen el Parte</label>
                <input type="time" class="form-control" id="horaTraenParte" name="horaTraenParte">
              </div>
              
              <div class="col-md-2">
                <label for="fechaEntrega" class="form-label">Fecha en la que es entregado el parte</label>
                <input type="date" class="form-control" id="fechaEntrega" name="fechaEntrega">
              </div>
            </div>
          </div>
        </div>


        <div class="col-12 text-center mt-4">
          <button type="submit" class="btn btn-primary btn-lg px-5">Guardar</button>
        </div>
      </form>

      <div id="alertaRespuesta" class="alert mt-4 d-none" role="alert"></div>
    </div>
  </div>

  <!-- Bootstrap Bundle JS (Popper incluido) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Choices.js para selects mejorados -->
  <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

  <!-- JS propio -->
  <script src="app.js"></script>

</body>

</html>